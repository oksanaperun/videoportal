<div class="app-course">
  <form [formGroup]="courseForm" (ngSubmit)="onSubmit()">
    <div class="header-box">
      <span class="base-font title">{{formTitle}}</span>
    </div>

    <div class="fields-box">
      <div class="title-box">
        <div class="header">
          <span class="base-font name">Title:</span>
          <span class="base-font required">*required</span>
        </div>
      
        <app-input
          formControlName="title"
          [invalid]="!isControlValid('title')"
          [placeholder]="'Add title'"
        ></app-input>

        <span *ngIf="isControlRequiredError('title')" class="base-font control-error">
          This field is required
        </span>
        <span *ngIf="isControlMaxLengthError('title')" class="base-font control-error">
          Max allowed length of this field is 50 symbols
        </span>
      </div>
      
      <div class="description-box">
        <div class="header">
          <span class="base-font name">Description:</span>
          <span class="base-font required">*required</span>
        </div>
      
        <app-textarea
          formControlName="description"
          [invalid]="!isControlValid('description')"
          [placeholder]="'Add description'"
        ></app-textarea>

        <span *ngIf="isControlRequiredError('description')" class="base-font control-error">
          This field is required
        </span>
        <span *ngIf="isControlMaxLengthError('description')" class="base-font control-error">
          Max allowed length of this field is 500 symbols
        </span>
      </div>
      
      <div class="duration-box">
        <div class="header">
          <span class="base-font name">Duration:</span>
          <span class="base-font required">*required</span>
        </div>
      
        <div class="duration-content-box">
          <app-integer-input
            class="duration-input"
            formControlName="duration"
            [invalid]="!isControlValid('duration')"
            [placeholder]="'minutes'"
          ></app-integer-input>
        
          <span class="base-font duration-info">{{courseForm.controls.duration.value | timeInMinutes}}</span>
        </div>

        <span *ngIf="isControlRequiredError('duration')" class="base-font control-error">
          This field is required
        </span>
        <span *ngIf="isControlMinError('duration')" class="base-font control-error">
          This field value should be greater or equal to 1
        </span>
      </div>
      
      <div class="date-box">
        <div class="header">
          <span class="base-font name">Date:</span>
          <span class="base-font required">*required</span>
        </div>

        <app-datepicker
          formControlName="date"
          [invalid]="!isControlValid('date')"
          [placeholder]="'d MMM, yyyy'"
        ></app-datepicker>

        <span *ngIf="isControlRequiredError('date')" class="base-font control-error">
          This field is required
        </span>
      </div>
      
      <div class="authors-box">
        <div class="header">
          <span class="base-font name">Authors:</span>
          <span class="base-font required">*required</span>
        </div>

        <app-multi-select-dropdown 
          formControlName="authors"
          [placeholder]="'Start typing'"
          [invalid]="!isControlValid('authors')"
          [options]="authorOptions$ | async"
        ></app-multi-select-dropdown>

        <span *ngIf="isControlRequiredError('authors')" class="base-font control-error">
          This field is required
        </span>
      </div>
    </div>

    <div class="footer-box">
      <app-button
        class="cancel-button"
        [name]="'Cancel'"
        [textColor]="'#5b616f'"
        (click)="onCancelButtonClick()"
      ></app-button>

      <app-button
        type="submit"
        class="save-button"
        [class.disabled]="!courseForm.valid"
        [name]="'Save'"
        [disabled]="!courseForm.valid"
        [textColor]="getSubmitButtonColor()"
      ></app-button>
    </div>
  </form>
</div>
